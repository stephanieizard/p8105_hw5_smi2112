P8105 Homework 5
================
Stephanie Izard

Problem 1
---------

#### Creating dataframe:

-   Step 1: Creating a string containing all file names

``` r
file_names <- list.files(path = "./data/q1/", full.names = TRUE)
```

-   Step 2: Iterating over file names, reading in data for each subject

``` r
read_ppt_info <- function(file_names) {
  z = read_csv(file_names)
  z
}

ppt_info <- file_names %>% 
  tibble(file_name = .) %>% 
  group_by(file_name) %>% 
  nest() %>% 
  mutate(data = map(.$file_name, read_ppt_info))
```

    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )

    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_integer(),
    ##   week_8 = col_double()
    ## )

    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )
    ## Parsed with column specification:
    ## cols(
    ##   week_1 = col_double(),
    ##   week_2 = col_double(),
    ##   week_3 = col_double(),
    ##   week_4 = col_double(),
    ##   week_5 = col_double(),
    ##   week_6 = col_double(),
    ##   week_7 = col_double(),
    ##   week_8 = col_double()
    ## )

-   Step 3: Tidying the result

``` r
ppt_info
```

    ## # A tibble: 20 x 2
    ##    file_name            data            
    ##    <chr>                <list>          
    ##  1 ./data/q1/con_01.csv <tibble [1 x 8]>
    ##  2 ./data/q1/con_02.csv <tibble [1 x 8]>
    ##  3 ./data/q1/con_03.csv <tibble [1 x 8]>
    ##  4 ./data/q1/con_04.csv <tibble [1 x 8]>
    ##  5 ./data/q1/con_05.csv <tibble [1 x 8]>
    ##  6 ./data/q1/con_06.csv <tibble [1 x 8]>
    ##  7 ./data/q1/con_07.csv <tibble [1 x 8]>
    ##  8 ./data/q1/con_08.csv <tibble [1 x 8]>
    ##  9 ./data/q1/con_09.csv <tibble [1 x 8]>
    ## 10 ./data/q1/con_10.csv <tibble [1 x 8]>
    ## 11 ./data/q1/exp_01.csv <tibble [1 x 8]>
    ## 12 ./data/q1/exp_02.csv <tibble [1 x 8]>
    ## 13 ./data/q1/exp_03.csv <tibble [1 x 8]>
    ## 14 ./data/q1/exp_04.csv <tibble [1 x 8]>
    ## 15 ./data/q1/exp_05.csv <tibble [1 x 8]>
    ## 16 ./data/q1/exp_06.csv <tibble [1 x 8]>
    ## 17 ./data/q1/exp_07.csv <tibble [1 x 8]>
    ## 18 ./data/q1/exp_08.csv <tibble [1 x 8]>
    ## 19 ./data/q1/exp_09.csv <tibble [1 x 8]>
    ## 20 ./data/q1/exp_10.csv <tibble [1 x 8]>

Problem 2
---------

#### Reading in the raw homicide data from the Washington Post

``` r
homicide_data <- read_csv("./data/homicide-data.csv") 
```

    ## Parsed with column specification:
    ## cols(
    ##   uid = col_character(),
    ##   reported_date = col_integer(),
    ##   victim_last = col_character(),
    ##   victim_first = col_character(),
    ##   victim_race = col_character(),
    ##   victim_age = col_character(),
    ##   victim_sex = col_character(),
    ##   city = col_character(),
    ##   state = col_character(),
    ##   lat = col_double(),
    ##   lon = col_double(),
    ##   disposition = col_character()
    ## )

About the raw data:

#### Creating a city\_state variable and summarizing within cities

``` r
homicide_data <- homicide_data %>% 
  unite(city_state, city:state, sep = ", ", remove = FALSE) %>% 
  mutate(case_status = if_else(disposition == "Closed without arrest", "unsolved", 
                               if_else(disposition == "Open/No arrest", "unsolved", "solved")))

homicide_data %>% 
  mutate(city_state = as.factor(city_state)) %>% 
  group_by(city_state) %>% 
  summarize("Total homicides" = n()) %>% 
  rename("City" = city_state) %>% 
  knitr::kable()
```

| City               |  Total homicides|
|:-------------------|----------------:|
| Albuquerque, NM    |              378|
| Atlanta, GA        |              973|
| Baltimore, MD      |             2827|
| Baton Rouge, LA    |              424|
| Birmingham, AL     |              800|
| Boston, MA         |              614|
| Buffalo, NY        |              521|
| Charlotte, NC      |              687|
| Chicago, IL        |             5535|
| Cincinnati, OH     |              694|
| Columbus, OH       |             1084|
| Dallas, TX         |             1567|
| Denver, CO         |              312|
| Detroit, MI        |             2519|
| Durham, NC         |              276|
| Fort Worth, TX     |              549|
| Fresno, CA         |              487|
| Houston, TX        |             2942|
| Indianapolis, IN   |             1322|
| Jacksonville, FL   |             1168|
| Kansas City, MO    |             1190|
| Las Vegas, NV      |             1381|
| Long Beach, CA     |              378|
| Los Angeles, CA    |             2257|
| Louisville, KY     |              576|
| Memphis, TN        |             1514|
| Miami, FL          |              744|
| Milwaukee, wI      |             1115|
| Minneapolis, MN    |              366|
| Nashville, TN      |              767|
| New Orleans, LA    |             1434|
| New York, NY       |              627|
| Oakland, CA        |              947|
| Oklahoma City, OK  |              672|
| Omaha, NE          |              409|
| Philadelphia, PA   |             3037|
| Phoenix, AZ        |              914|
| Pittsburgh, PA     |              631|
| Richmond, VA       |              429|
| Sacramento, CA     |              376|
| San Antonio, TX    |              833|
| San Bernardino, CA |              275|
| San Diego, CA      |              461|
| San Francisco, CA  |              663|
| Savannah, GA       |              246|
| St. Louis, MO      |             1677|
| Stockton, CA       |              444|
| Tampa, FL          |              208|
| Tulsa, AL          |                1|
| Tulsa, OK          |              583|
| Washington, DC     |             1345|
